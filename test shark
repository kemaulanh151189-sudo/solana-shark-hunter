def calculate_win_token_percent(wallet):
    """Tính % token thắng (unique token có profit proxy) trong 24h"""
    txs_24h = get_all_tx_24h(wallet)
    if not txs_24h:
        return 0, 0
    
    unique_tokens = set()
    winning_tokens = set()
    
    for tx in txs_24h:
        # Parse token từ tokenTransfers nếu có (Helius parsed tx có field này)
        transfers = tx.get('tokenTransfers', [])
        for transfer in transfers:
            token = transfer.get('mint')  # Token address
            if token:
                unique_tokens.add(token)
                
                # Proxy win: Nếu có transfer 'out' (sell) và amount positive (profit proxy từ success tx)
                if transfer.get('tokenAmount') > 0 and 'sell' in tx.get('description', '').lower():
                    winning_tokens.add(token)
        
        # Fallback description nếu không có tokenTransfers
        desc = tx.get('description', '').lower()
        if 'swapped' in desc or 'transferred' in desc:
            # Extract token address từ desc (khó chính xác, proxy nếu success tx)
            if tx.get('error') is None:
                # Giả sử mỗi success swap liên quan 1 token → add win nếu success
                # (cải thiện sau)
                pass  # Có thể parse token mint từ desc
    
    total_unique = len(unique_tokens)
    win_count = len(winning_tokens) if winning_tokens else total_unique // 2  # Proxy nếu không parse được
    win_percent = (win_count / total_unique * 100) if total_unique > 0 else 0
    
    return win_percent, total_unique  # Thay total_tx bằng total_unique tokens

# Trong hunt_top_10(): Thay total_count bằng total_unique, và lọc if total_unique > 50: continue (nếu muốn lọc số token trade nhiều)
